// prisma/seed.ts
import "dotenv/config"
import { PrismaPg } from "@prisma/adapter-pg"
import { PrismaClient } from "@/lib/generated/prisma/client"
import { createAuthClient } from "better-auth/client"

// ‚îÄ‚îÄ‚îÄ Prisma v7 : adapter obligatoire ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const adapter = new PrismaPg({
    connectionString: process.env.DIRECT_URL!,
})
const prisma = new PrismaClient({ adapter })

// ‚îÄ‚îÄ‚îÄ Hash compatible Better-Auth ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Better-Auth utilise son propre wrapper autour de scrypt (pas argon2)
// Il faut importer exactement la m√™me fonction qu'il utilise en interne
import { hashPassword } from "better-auth/crypto"

// ‚îÄ‚îÄ‚îÄ Main ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

async function main() {
    console.log("üå± D√©marrage du seeding...\n")

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 1. PLANS
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üì¶ Cr√©ation des plans...")

    const planFree = await prisma.plan.upsert({
        where: { name: "FREE" },
        update: {},
        create: {
            name: "FREE",
            priceMonthly: 0,
            priceYearly: 0,
            maxInvoices: 5,
            maxExpenses: 10,
            maxUsers: 1,
            maxProducts: 10,
        },
    })

    const planStarter = await prisma.plan.upsert({
        where: { name: "STARTER" },
        update: {},
        create: {
            name: "STARTER",
            priceMonthly: 9.99,
            priceYearly: 99.0,
            maxInvoices: 50,
            maxExpenses: 100,
            maxUsers: 3,
            maxProducts: 50,
        },
    })

    const planPro = await prisma.plan.upsert({
        where: { name: "PRO" },
        update: {},
        create: {
            name: "PRO",
            priceMonthly: 29.99,
            priceYearly: 299.0,
            maxInvoices: null,
            maxExpenses: null,
            maxUsers: 10,
            maxProducts: null,
        },
    })

    console.log(`   ‚úÖ FREE    ‚Äî 0‚Ç¨/mois`)
    console.log(`   ‚úÖ STARTER ‚Äî 9.99‚Ç¨/mois`)
    console.log(`   ‚úÖ PRO     ‚Äî 29.99‚Ç¨/mois\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 2. USERS + ACCOUNTS (credential)
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üë§ Cr√©ation des utilisateurs + accounts credential...")

    // hashPassword de better-auth/crypto produit un hash au format exact
    // que Better-Auth attend lors du login ‚Äî pas argon2, pas bcrypt, mais scrypt
    const passwordHash = await hashPassword("Password123!")

    async function createUserWithCredentials({
        email,
        name,
        phoneNumber,
        emailVerified,
        phoneNumberVerified,
    }: {
        email: string
        name: string
        phoneNumber: string
        emailVerified: boolean
        phoneNumberVerified: boolean
    }) {
        const user = await prisma.user.upsert({
            where: { email },
            update: {},
            create: {
                email,
                name,
                password: passwordHash,
                emailVerified,
                phoneNumber,
                phoneNumberVerified,
            },
        })

        // Better-Auth cherche Account avec providerId="credential" et accountId=userId
        await prisma.account.upsert({
            where: {
                providerId_accountId: {
                    providerId: "credential",
                    accountId: user.id,
                },
            },
            update: { password: passwordHash },
            create: {
                accountId: user.id,
                providerId: "credential",
                userId: user.id,
                password: passwordHash,
            },
        })

        return user
    }

    const userAlpha = await createUserWithCredentials({
        email: "alpha@noumtech.sn",
        name: "Alpha Diallo",
        phoneNumber: "+221771000001",
        emailVerified: true,
        phoneNumberVerified: true,
    })

    const beta = await createUserWithCredentials({
        email: "beta@noumtech.sn",
        name: "Beta Ndiaye",
        phoneNumber: "+221771000002",
        emailVerified: true,
        phoneNumberVerified: false,
    })

    const gamma = await createUserWithCredentials({
        email: "gamma@gadaco.sn",
        name: "Gamma Sow",
        phoneNumber: "+221771000003",
        emailVerified: true,
        phoneNumberVerified: true,
    })

    const delta = await createUserWithCredentials({
        email: "delta@gadaco.sn",
        name: "Delta Ba",
        phoneNumber: "+221771000004",
        emailVerified: false,
        phoneNumberVerified: false,
    })

    console.log(`   ‚úÖ ${userAlpha.name} ‚Äî hash scrypt Better-Auth`)
    console.log(`   ‚úÖ ${beta.name} ‚Äî hash scrypt Better-Auth`)
    console.log(`   ‚úÖ ${gamma.name} ‚Äî hash scrypt Better-Auth`)
    console.log(`   ‚úÖ ${delta.name} ‚Äî hash scrypt Better-Auth\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 3. ORGANISATIONS
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üè¢ Cr√©ation des organisations...")

    const noumtech = await prisma.organization.upsert({
        where: { slug: "noumtech" },
        update: {},
        create: {
            name: "Noumtech",
            slug: "noumtech",
            defaultCurrency: "XOF",
            email: "contact@noumtech.sn",
            phone: "+221338001000",
            address: "Dakar, Plateau, Rue 10",
            website: "https://noumtech.sn",
            taxId: "SN-2024-NOUM-001",
        },
    })

    const gadaco = await prisma.organization.upsert({
        where: { slug: "gadaco" },
        update: {},
        create: {
            name: "Gadaco",
            slug: "gadaco",
            defaultCurrency: "XOF",
            email: "info@gadaco.sn",
            phone: "+221338002000",
            address: "Dakar, Almadies, Villa 42",
            website: "https://gadaco.sn",
            taxId: "SN-2024-GADA-002",
        },
    })

    console.log(`   ‚úÖ ${noumtech.name} (slug: ${noumtech.slug})`)
    console.log(`   ‚úÖ ${gadaco.name} (slug: ${gadaco.slug})\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 4. MEMBERSHIPS
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üîó Cr√©ation des memberships...")

    const memberships = [
        { userId: userAlpha.id, organizationId: noumtech.id, role: "OWNER" as const },
        { userId: beta.id, organizationId: noumtech.id, role: "ADMIN" as const },
        { userId: gamma.id, organizationId: gadaco.id, role: "OWNER" as const },
        { userId: delta.id, organizationId: gadaco.id, role: "ACCOUNTANT" as const },
        { userId: beta.id, organizationId: gadaco.id, role: "MEMBER" as const },
    ]

    for (const m of memberships) {
        await prisma.membership.upsert({
            where: {
                userId_organizationId: {
                    userId: m.userId,
                    organizationId: m.organizationId,
                },
            },
            update: {},
            create: m,
        })
    }

    console.log(`   ‚úÖ Noumtech ‚Üí Alpha (OWNER), Beta (ADMIN)`)
    console.log(`   ‚úÖ Gadaco   ‚Üí Gamma (OWNER), Delta (ACCOUNTANT), Beta (MEMBER)\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 5. SUBSCRIPTIONS
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üí≥ Cr√©ation des abonnements...")

    const oneYearFromNow = new Date()
    oneYearFromNow.setFullYear(oneYearFromNow.getFullYear() + 1)

    const sixMonthsFromNow = new Date()
    sixMonthsFromNow.setMonth(sixMonthsFromNow.getMonth() + 6)

    await prisma.subscription.upsert({
        where: { organizationId: noumtech.id },
        update: {},
        create: {
            organizationId: noumtech.id,
            planId: planPro.id,
            status: "ACTIVE",
            currentPeriodEnd: oneYearFromNow,
            cancelAtPeriodEnd: false,
        },
    })

    await prisma.subscription.upsert({
        where: { organizationId: gadaco.id },
        update: {},
        create: {
            organizationId: gadaco.id,
            planId: planStarter.id,
            status: "ACTIVE",
            currentPeriodEnd: sixMonthsFromNow,
            cancelAtPeriodEnd: false,
        },
    })

    console.log(`   ‚úÖ Noumtech ‚Üí PRO`)
    console.log(`   ‚úÖ Gadaco   ‚Üí STARTER\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 6. TAX RATES
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üßæ Cr√©ation des taux de TVA...")

    await prisma.taxRate.createMany({
        skipDuplicates: true,
        data: [
            { organizationId: noumtech.id, name: "TVA 18%", rate: 18.0, isDefault: true },
            { organizationId: noumtech.id, name: "Exon√©r√©", rate: 0.0, isDefault: false },
            { organizationId: gadaco.id, name: "TVA 18%", rate: 18.0, isDefault: true },
            { organizationId: gadaco.id, name: "TVA r√©duite 9%", rate: 9.0, isDefault: false },
            { organizationId: gadaco.id, name: "Exon√©r√©", rate: 0.0, isDefault: false },
        ],
    })

    console.log(`   ‚úÖ Noumtech ‚Üí TVA 18%, Exon√©r√©`)
    console.log(`   ‚úÖ Gadaco   ‚Üí TVA 18%, TVA r√©duite 9%, Exon√©r√©\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // 7. CURRENCIES
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("üí± Cr√©ation des devises...")

    await prisma.currency.createMany({
        skipDuplicates: true,
        data: [
            { code: "XOF", name: "Franc CFA BCEAO", symbol: "FCFA" },
            { code: "USD", name: "Dollar am√©ricain", symbol: "$" },
            { code: "EUR", name: "Euro", symbol: "‚Ç¨" },
            { code: "GBP", name: "Livre sterling", symbol: "¬£" },
            { code: "MAD", name: "Dirham marocain", symbol: "MAD" },
            { code: "NGN", name: "Naira nig√©rian", symbol: "‚Ç¶" },
            { code: "GHS", name: "Cedi ghan√©en", symbol: "‚Çµ" },
        ],
    })

    console.log(`   ‚úÖ XOF, USD, EUR, GBP, MAD, NGN, GHS\n`)

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // R√âCAPITULATIF
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    console.log("‚îÄ".repeat(55))
    console.log("‚úÖ Seeding termin√© avec succ√®s !\n")
    console.log("üìã R√©sum√© :")
    console.log(`   Plans         : FREE ¬∑ STARTER ¬∑ PRO`)
    console.log(`   Organisations : Noumtech ¬∑ Gadaco`)
    console.log(`   Utilisateurs  : Alpha ¬∑ Beta ¬∑ Gamma ¬∑ Delta`)
    console.log(`   Mot de passe  : Password123! (tous les users)`)
    console.log("‚îÄ".repeat(55))
    console.log("\nüóÇÔ∏è  Structure des acc√®s :")
    console.log("   Noumtech  ‚Üí  alpha@noumtech.sn (OWNER)")
    console.log("             ‚Üí  beta@noumtech.sn  (ADMIN)")
    console.log("   Gadaco    ‚Üí  gamma@gadaco.sn   (OWNER)")
    console.log("             ‚Üí  delta@gadaco.sn   (ACCOUNTANT)")
    console.log("             ‚Üí  beta@noumtech.sn  (MEMBER) ‚Üê multi-org")
    console.log("")
}

main()
    .then(async () => { await prisma.$disconnect() })
    .catch(async (e) => {
        console.error("‚ùå Erreur lors du seeding :", e)
        await prisma.$disconnect()
        process.exit(1)
    })